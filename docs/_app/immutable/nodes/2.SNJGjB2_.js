var Le=Object.defineProperty;var Ue=(i,e,t)=>e in i?Le(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var ae=(i,e,t)=>(Ue(i,typeof e!="symbol"?e+"":e,t),t);import{s as Y,e as g,c as b,O as X,v as y,i as P,n as x,f,a as O,b as $,g as D,h as c,P as De,t as A,d as G,Q as Z,R as ie,p as ve,S as he,A as qe,T as ne,w as Q,j as ee,U as _e,l as Ke,u as We,m as Ye,o as ze,r as je}from"../chunks/scheduler.BlN9668F.js";import{S as z,i as j,b as R,d as L,m as U,t as T,a as I,e as q,g as re,c as se}from"../chunks/index.DfZAt8fY.js";import{w as Fe}from"../chunks/index.n447HBFN.js";function le(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function xe(i){let e,t="MINESWEEPER";return{c(){e=g("div"),e.textContent=t,this.h()},l(n){e=b(n,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-zcvkwj"&&(e.textContent=t),this.h()},h(){y(e,"class","title svelte-a2inip")},m(n,r){P(n,e,r)},p:x,i:x,o:x,d(n){n&&f(e)}}}class Ve extends z{constructor(e){super(),j(this,e,null,xe,Y,{})}}function ue({x:i,y:e}){return{x:i,y:e-1}}function fe({x:i,y:e}){return{x:i-1,y:e}}function ce({x:i,y:e}){return{x:i+1,y:e}}function de({x:i,y:e}){return{x:i,y:e+1}}function He(i,e){return i.x===e.x&&i.y===e.y}function Qe(i,e){return e.some(t=>He(i,t))}function Xe(i,e){return i.some(t=>t.index===e.index)}function Je(i){return i.isCovered&&i.type!=="MINE"}function Ae(i){return i.displayType==="COVERED"||i.displayType==="UNKNOWN"||i.displayType==="FLAG"}function Ge(i,e){const t=Ze(i,e),n=Se(i,[ue(fe(e)),ue(ce(e)),de(fe(e)),de(ce(e))]);return t.concat(n)}function Ze(i,e){return Se(i,[ue(e),fe(e),ce(e),de(e)])}function Se(i,e){let t=[];for(let n of e){const r=et(i,n);r&&t.push(r)}return t}function et(i,{x:e,y:t}){if(me(i,e,t))return i.grids[e+t*i.width]}function tt(i,{x:e,y:t}){if(!me(i,e,t))throw new Error(`x, y must be valid position: x=${e}, y=${t}`);return i.grids[nt(i,{x:e,y:t})]}function me({height:i,width:e},t,n){return!(t<0||t>=e||n<0||n>=i)}function nt(i,{x:e,y:t}){if(!me(i,e,t))throw new Error(`x, y must be valid position: x=${e} y=${t}`);return e+t*i.width}function it(i){return i.grids.filter(e=>e.type==="BLANK"&&e.displayType!=="BLANK").length}function $e(i){return i.grids.filter(e=>e.type==="MINE"&&Ae(e)).length}function Ee(i,e){const t=i.grids.find(n=>n.type==="MINE"&&Ae(n));return t?(t.displayType=e==="BURST"?"MINE":"CLEARED_MINE",!0):!1}function rt({width:i,height:e,getBombPositions:t}){let n=st(i,e);return lt(n,t(n)),ot(n),n}function st(i,e){const t=[];for(let n=0;n<e;n++)for(let r=0;r<i;r++)t.push({index:r+n*i,type:"BLANK",isCovered:!0,displayType:"COVERED",x:r,y:n,neighborBombCount:0});return{height:e,width:i,grids:t}}function lt(i,e){for(let t of i.grids)Qe(t,e)&&(t.type="MINE")}function ot(i){for(let e of i.grids)e.neighborBombCount=at(i,e.x,e.y)}function at(i,e,t){let n=0;for(let r of Ge(i,{x:e,y:t}))r.type==="MINE"&&n++;return n}class ut{constructor(){ae(this,"visited",new Set)}isVisited(e){return this.visited.has(`${e.x}-${e.y}`)}isNotVisited(e){return!this.isVisited(e)}visit(e){this.visited.add(`${e.x}-${e.y}`)}}function ft(i,e){const t=e.neighborBombCount>0?[e]:ct(i,e);for(let n of t)Xe(t,n)&&(n.displayType="BLANK")}function ct(i,e){const t=new ut,n=[e],r=[];for(;;){const s=n.shift();if(!s)break;if(t.isVisited(s))continue;t.visit(s),r.push(s);const l=dt(i,s).filter(o=>t.isNotVisited(o));for(let o of l)o.neighborBombCount>0?(r.push(o),t.visit(o)):n.push(o)}return r}function dt(i,e){return e.isCovered?e.type==="MINE"?[]:Ge(i,e).filter(Je):[]}function ht(i){for(let e of i.grids)e.type==="MINE"&&(e.displayType="MINE")}function Re(i){return e=>{const t=[],n=new Set;for(;t.length<i;){const r=Math.floor(Math.random()*e.width),s=Math.floor(Math.random()*e.height),l=`${r}|${s}`;n.has(l)||(t.push({x:r,y:s}),n.add(l))}return t}}class mt{constructor(){ae(this,"state",Fe({type:"SELECT-STAGE"}))}init(e){this.state.update(t=>({type:"PLAYING",startTime:void 0,game:ye(e)}))}openCover({x:e,y:t}){this.state.update(n=>{if(n.type!=="PLAYING")return n;const r=n.game,s=tt(r.board,{x:e,y:t});return s.isCovered?s.type==="MINE"?(s.displayType="MINE",{type:"GAME-OVER",q:"SHOW-MINES",nextTime:r.currentTime+400,game:r}):(ft(r.board,s),r.restBlankCount=it(r.board),n.startTime||(n.startTime=r.currentTime),r.restBlankCount<=0?pt(n):n):n})}changeMark(e){this.state.update(t=>{if(t.type==="PLAYING"){const n=t.game;e.displayType==="COVERED"?(e.displayType="FLAG",n.restBombCount--):e.displayType==="FLAG"?(e.displayType="UNKNOWN",n.restBombCount++):e.displayType==="UNKNOWN"&&(e.displayType="COVERED")}return t})}tick(e){this.state.update(t=>{if(t.type==="SELECT-STAGE")return t;if(t.type==="PLAYING")t.startTime&&(t.game.elapsedSeconds=Math.floor((e-t.startTime)/1e3));else if(t.type==="GAME-OVER"){const r=t.game.board;t.q==="SHOW-MINES"?e>=t.nextTime&&($e(r)>0?(e>=t.nextTime&&Ee(r,"BURST"),t.nextTime=e+100):(t.q="POPUP-PENDING",t.nextTime=e+1e3)):t.q==="POPUP-PENDING"&&e>=t.nextTime&&(t.q="POPUP-OPEN")}else if(t.type==="COMPLETE"){const n=t.game,r=n.board;t.q==="SHOW-MINES"?e>=t.nextTime&&($e(r)>0?(Ee(n.board,"CLEAR"),t.nextTime=e+100):(t.q="POPUP-PENDING",t.nextTime=e+1e3)):t.q==="POPUP-PENDING"&&e>=t.nextTime&&(t.q="POPUP-OPEN",t.nextTime=e+1e3)}return t.game.currentTime=e,t})}retry(e){this.state.update(t=>t.type==="GAME-OVER"||t.type==="COMPLETE"?{type:"PLAYING",startTime:void 0,game:ye({stageType:t.game.stageType,width:t.game.board.width,height:t.game.board.height,getMinePositions:Re(t.game.initialBombCount),currentTime:e})}:t)}backToMenu(){this.state.update(e=>({type:"SELECT-STAGE"}))}giveUp(){this.state.update(e=>{if(e.type==="PLAYING"){const t=e.game;return ht(t.board),{type:"GAME-OVER",q:"POPUP-OPEN",nextTime:0,game:t}}return e})}}function ye({width:i,height:e,getMinePositions:t,stageType:n,currentTime:r}){const s=rt({width:i,height:e,getBombPositions:t}),l=s.grids.filter(o=>o.type==="MINE").length;return{initialBombCount:l,restBombCount:l,restBlankCount:i*e-l,elapsedSeconds:0,board:s,stageType:n,currentTime:r}}function pt(i){const e=i.game,t=window.localStorage.getItem("minesweeper.bestTime."+e.stageType);let n=t?Number(t):Number.MAX_SAFE_INTEGER;return e.elapsedSeconds<n&&(n=e.elapsedSeconds,window.localStorage.setItem("minesweeper.bestTime."+e.stageType,""+n)),{type:"COMPLETE",q:"SHOW-MINES",nextTime:e.currentTime+400,bestTime:n,game:e}}const F=new mt;function Te(i,e,t){const n=i.slice();return n[3]=e[t],n}function Ce(i){let e,t,n,r=i[3].name+"",s,l,o,a=i[3].width+"",d,u,h=i[3].height+"",p,S,w,K=i[3].bombCount+"",N,E,v,m;function _(...k){return i[2](i[3],...k)}return{c(){e=g("div"),t=g("button"),n=g("div"),s=A(r),l=O(),o=g("div"),d=A(a),u=A(" x "),p=A(h),S=O(),w=g("div"),N=A(K),E=O(),this.h()},l(k){e=b(k,"DIV",{class:!0});var B=$(e);t=b(B,"BUTTON",{class:!0});var C=$(t);n=b(C,"DIV",{});var H=$(n);s=G(H,r),H.forEach(f),l=D(C),o=b(C,"DIV",{});var M=$(o);d=G(M,a),u=G(M," x "),p=G(M,h),M.forEach(f),S=D(C),w=b(C,"DIV",{});var V=$(w);N=G(V,K),V.forEach(f),C.forEach(f),E=D(B),B.forEach(f),this.h()},h(){y(t,"class","button svelte-11z6qv5"),y(e,"class","button-wrapper svelte-11z6qv5")},m(k,B){P(k,e,B),c(e,t),c(t,n),c(n,s),c(t,l),c(t,o),c(o,d),c(o,u),c(o,p),c(t,S),c(t,w),c(w,N),c(e,E),v||(m=Z(t,"click",ie(_)),v=!0)},p(k,B){i=k},d(k){k&&f(e),v=!1,m()}}}function gt(i){let e,t,n,r,s;t=new Ve({});let l=le(i[0]),o=[];for(let a=0;a<l.length;a+=1)o[a]=Ce(Te(i,l,a));return{c(){e=g("div"),R(t.$$.fragment),n=O(),r=g("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=b(a,"DIV",{class:!0});var d=$(e);L(t.$$.fragment,d),n=D(d),r=b(d,"DIV",{class:!0});var u=$(r);for(let h=0;h<o.length;h+=1)o[h].l(u);u.forEach(f),d.forEach(f),this.h()},h(){y(r,"class","buttons svelte-11z6qv5"),y(e,"class","menu-page svelte-11z6qv5")},m(a,d){P(a,e,d),U(t,e,null),c(e,n),c(e,r);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(r,null);s=!0},p(a,[d]){if(d&3){l=le(a[0]);let u;for(u=0;u<l.length;u+=1){const h=Te(a,l,u);o[u]?o[u].p(h,d):(o[u]=Ce(h),o[u].c(),o[u].m(r,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}},i(a){s||(T(t.$$.fragment,a),s=!0)},o(a){I(t.$$.fragment,a),s=!1},d(a){a&&f(e),q(t),De(o,a)}}}function bt(i){const e=[{name:"Easy",width:9,height:9,bombCount:10,stageType:"EASY"},{name:"Normal",width:16,height:16,bombCount:40,stageType:"NORMAL"},{name:"Hard",width:30,height:16,bombCount:99,stageType:"HARD"}];function t(r){F.init({width:r.width,height:r.height,getMinePositions:Re(r.bombCount),stageType:r.stageType,currentTime:new Date().getTime()})}return[e,t,(r,s)=>t(r)]}class vt extends z{constructor(e){super(),j(this,e,bt,gt,Y,{})}}function _t(i){let e,t,n,r,s=i[0].displayType==="FLAG"&&Ne(),l=i[0].displayType==="UNKNOWN"&&ke();return{c(){e=g("button"),s&&s.c(),t=O(),l&&l.c(),this.h()},l(o){e=b(o,"BUTTON",{class:!0,tabindex:!0});var a=$(e);s&&s.l(a),t=D(a),l&&l.l(a),a.forEach(f),this.h()},h(){y(e,"class","grid grid--covered svelte-1mbky95"),y(e,"tabindex","-1")},m(o,a){P(o,e,a),s&&s.m(e,null),c(e,t),l&&l.m(e,null),n||(r=[Z(e,"contextmenu",ie(i[5])),Z(e,"click",ie(i[6]))],n=!0)},p(o,a){o[0].displayType==="FLAG"?s||(s=Ne(),s.c(),s.m(e,t)):s&&(s.d(1),s=null),o[0].displayType==="UNKNOWN"?l||(l=ke(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(o){o&&f(e),s&&s.d(),l&&l.d(),n=!1,qe(r)}}}function $t(i){let e,t="💣";return{c(){e=g("button"),e.textContent=t,this.h()},l(n){e=b(n,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1yldtii"&&(e.textContent=t),this.h()},h(){y(e,"class","grid svelte-1mbky95"),ne(e,"grid--burst",i[0].displayType==="MINE"),ne(e,"grid--cleared",i[0].displayType==="CLEARED_MINE")},m(n,r){P(n,e,r)},p(n,r){r&1&&ne(e,"grid--burst",n[0].displayType==="MINE"),r&1&&ne(e,"grid--cleared",n[0].displayType==="CLEARED_MINE")},d(n){n&&f(e)}}}function Et(i){let e,t=i[0].neighborBombCount>0&&Ie(i);return{c(){e=g("button"),t&&t.c(),this.h()},l(n){e=b(n,"BUTTON",{class:!0});var r=$(e);t&&t.l(r),r.forEach(f),this.h()},h(){y(e,"class","grid grid--blank svelte-1mbky95"),e.disabled=!0,Q(e,"color",i[1]())},m(n,r){P(n,e,r),t&&t.m(e,null)},p(n,r){n[0].neighborBombCount>0?t?t.p(n,r):(t=Ie(n),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(n){n&&f(e),t&&t.d()}}}function Ne(i){let e;return{c(){e=A("🚩")},l(t){e=G(t,"🚩")},m(t,n){P(t,e,n)},d(t){t&&f(e)}}}function ke(i){let e;return{c(){e=A("❓")},l(t){e=G(t,"❓")},m(t,n){P(t,e,n)},d(t){t&&f(e)}}}function Ie(i){let e=i[0].neighborBombCount+"",t;return{c(){t=A(e)},l(n){t=G(n,e)},m(n,r){P(n,t,r)},p(n,r){r&1&&e!==(e=n[0].neighborBombCount+"")&&ee(t,e)},d(n){n&&f(t)}}}function yt(i){let e;function t(s,l){if(s[0].displayType==="BLANK")return Et;if(s[0].displayType==="MINE"||s[0].displayType==="CLEARED_MINE")return $t;if(s[0].displayType==="COVERED"||s[0].displayType==="FLAG"||s[0].displayType==="UNKNOWN")return _t}let n=t(i),r=n&&n(i);return{c(){r&&r.c(),e=ve()},l(s){r&&r.l(s),e=ve()},m(s,l){r&&r.m(s,l),P(s,e,l)},p(s,[l]){n===(n=t(s))&&r?r.p(s,l):(r&&r.d(1),r=n&&n(s),r&&(r.c(),r.m(e.parentNode,e)))},i:x,o:x,d(s){s&&f(e),r&&r.d(s)}}}function Tt(i,e,t){let{grid:n}=e,{isDisabled:r=!1}=e;const s=he();function l(){return n.neighborBombCount===1?"blue":n.neighborBombCount===2?"green":n.neighborBombCount===3?"red":n.neighborBombCount===4?"purple":n.neighborBombCount===5?"maroon":n.neighborBombCount===6?"turquoise":n.neighborBombCount===7?"black":n.neighborBombCount===8?"gray":"black"}function o(){r||s("changeMark",n)}function a(){r||s("openCover",n)}const d=h=>o(),u=h=>a();return i.$$set=h=>{"grid"in h&&t(0,n=h.grid),"isDisabled"in h&&t(4,r=h.isDisabled)},[n,l,o,a,r,d,u]}class Ct extends z{constructor(e){super(),j(this,e,Tt,yt,Y,{grid:0,isDisabled:4})}}function Pe(i,e,t){const n=i.slice();return n[4]=e[t],n}function Be(i){let e,t;return e=new Ct({props:{grid:i[4],isDisabled:i[1]}}),e.$on("changeMark",i[2]),e.$on("openCover",i[3]),{c(){R(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,r){U(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.grid=n[4]),r&2&&(s.isDisabled=n[1]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function Nt(i){let e,t,n=le(i[0].grids),r=[];for(let l=0;l<n.length;l+=1)r[l]=Be(Pe(i,n,l));const s=l=>I(r[l],1,1,()=>{r[l]=null});return{c(){e=g("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=b(l,"DIV",{class:!0});var o=$(e);for(let a=0;a<r.length;a+=1)r[a].l(o);o.forEach(f),this.h()},h(){y(e,"class","board-view svelte-h8ibil"),Q(e,"width",`${i[0].width*20}px`),Q(e,"height",`${i[0].height*20}px`),Q(e,"grid-template-columns",`repeat(${i[0].width}, 1fr)`)},m(l,o){P(l,e,o);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);t=!0},p(l,[o]){if(o&3){n=le(l[0].grids);let a;for(a=0;a<n.length;a+=1){const d=Pe(l,n,a);r[a]?(r[a].p(d,o),T(r[a],1)):(r[a]=Be(d),r[a].c(),T(r[a],1),r[a].m(e,null))}for(re(),a=n.length;a<r.length;a+=1)s(a);se()}o&1&&Q(e,"width",`${l[0].width*20}px`),o&1&&Q(e,"height",`${l[0].height*20}px`),o&1&&Q(e,"grid-template-columns",`repeat(${l[0].width}, 1fr)`)},i(l){if(!t){for(let o=0;o<n.length;o+=1)T(r[o]);t=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)I(r[o]);t=!1},d(l){l&&f(e),De(r,l)}}}function kt(i,e,t){let{board:n}=e,{isDisabled:r=!1}=e;function s(o){_e.call(this,i,o)}function l(o){_e.call(this,i,o)}return i.$$set=o=>{"board"in o&&t(0,n=o.board),"isDisabled"in o&&t(1,r=o.isDisabled)},[n,r,s,l]}class It extends z{constructor(e){super(),j(this,e,kt,Nt,Y,{board:0,isDisabled:1})}}function Pt(i){let e,t,n;return{c(){e=g("div"),t=A("💣"),n=A(i[0]),this.h()},l(r){e=b(r,"DIV",{class:!0});var s=$(e);t=G(s,"💣"),n=G(s,i[0]),s.forEach(f),this.h()},h(){y(e,"class","bomb-count svelte-1r3jslb")},m(r,s){P(r,e,s),c(e,t),c(e,n)},p(r,[s]){s&1&&ee(n,r[0])},i:x,o:x,d(r){r&&f(e)}}}function Bt(i,e,t){let{count:n}=e,r="";return i.$$set=s=>{"count"in s&&t(1,n=s.count)},i.$$.update=()=>{i.$$.dirty&2&&(n<=-100?t(0,r="-99"):n<0?t(0,r="-"+("00"+-n).slice(-2)):n>=1e3?t(0,r="999"):t(0,r=("000"+n).slice(-3)))},[r,n]}class Mt extends z{constructor(e){super(),j(this,e,Bt,Pt,Y,{count:1})}}function wt(i){let e,t,n,r;const s=i[2].default,l=Ke(s,i,i[1],null);return{c(){e=g("button"),l&&l.c(),this.h()},l(o){e=b(o,"BUTTON",{class:!0});var a=$(e);l&&l.l(a),a.forEach(f),this.h()},h(){y(e,"class","button svelte-3m2h9r")},m(o,a){P(o,e,a),l&&l.m(e,null),t=!0,n||(r=Z(e,"click",ie(i[0])),n=!0)},p(o,[a]){l&&l.p&&(!t||a&2)&&We(l,s,o,o[1],t?ze(s,o[1],a,null):Ye(o[1]),null)},i(o){t||(T(l,o),t=!0)},o(o){I(l,o),t=!1},d(o){o&&f(e),l&&l.d(o),n=!1,r()}}}function Ot(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=he();function l(){s("click")}return i.$$set=o=>{"$$scope"in o&&t(1,r=o.$$scope)},[l,r,n]}class oe extends z{constructor(e){super(),j(this,e,Ot,wt,Y,{})}}function Dt(i){let e;return{c(){e=A("RETRY")},l(t){e=G(t,"RETRY")},m(t,n){P(t,e,n)},d(t){t&&f(e)}}}function Vt(i){let e;return{c(){e=A("BACK TO MENU")},l(t){e=G(t,"BACK TO MENU")},m(t,n){P(t,e,n)},d(t){t&&f(e)}}}function At(i){let e,t,n="Game Over",r,s,l,o,a,d,u;return l=new oe({props:{$$slots:{default:[Dt]},$$scope:{ctx:i}}}),l.$on("click",i[0]),d=new oe({props:{$$slots:{default:[Vt]},$$scope:{ctx:i}}}),d.$on("click",i[1]),{c(){e=g("div"),t=g("div"),t.textContent=n,r=O(),s=g("div"),R(l.$$.fragment),o=O(),a=g("div"),R(d.$$.fragment),this.h()},l(h){e=b(h,"DIV",{class:!0});var p=$(e);t=b(p,"DIV",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-znvirt"&&(t.textContent=n),r=D(p),s=b(p,"DIV",{class:!0});var S=$(s);L(l.$$.fragment,S),S.forEach(f),o=D(p),a=b(p,"DIV",{class:!0});var w=$(a);L(d.$$.fragment,w),w.forEach(f),p.forEach(f),this.h()},h(){y(t,"class","title svelte-1fzmot9"),y(s,"class","button svelte-1fzmot9"),y(a,"class","button svelte-1fzmot9"),y(e,"class","root svelte-1fzmot9")},m(h,p){P(h,e,p),c(e,t),c(e,r),c(e,s),U(l,s,null),c(e,o),c(e,a),U(d,a,null),u=!0},p(h,[p]){const S={};p&4&&(S.$$scope={dirty:p,ctx:h}),l.$set(S);const w={};p&4&&(w.$$scope={dirty:p,ctx:h}),d.$set(w)},i(h){u||(T(l.$$.fragment,h),T(d.$$.fragment,h),u=!0)},o(h){I(l.$$.fragment,h),I(d.$$.fragment,h),u=!1},d(h){h&&f(e),q(l),q(d)}}}function Gt(i){function e(){F.retry(new Date().getTime())}function t(){F.backToMenu()}return[e,t]}class St extends z{constructor(e){super(),j(this,e,Gt,At,Y,{})}}function Rt(i){let e;return{c(){e=A("RETRY")},l(t){e=G(t,"RETRY")},m(t,n){P(t,e,n)},d(t){t&&f(e)}}}function Lt(i){let e;return{c(){e=A("BACK TO MENU")},l(t){e=G(t,"BACK TO MENU")},m(t,n){P(t,e,n)},d(t){t&&f(e)}}}function Ut(i){let e,t,n="Congratulation🎉",r,s,l,o="TIME:",a,d,u,h,p,S="BEST TIME:",w,K,N,E,v,m,_,k,B,C,H;return _=new oe({props:{$$slots:{default:[Rt]},$$scope:{ctx:i}}}),_.$on("click",i[2]),C=new oe({props:{$$slots:{default:[Lt]},$$scope:{ctx:i}}}),C.$on("click",i[3]),{c(){e=g("div"),t=g("div"),t.textContent=n,r=O(),s=g("div"),l=g("div"),l.textContent=o,a=O(),d=g("div"),u=A(i[0]),h=O(),p=g("div"),p.textContent=S,w=O(),K=g("div"),N=A(i[1]),E=O(),v=g("div"),m=g("div"),R(_.$$.fragment),k=O(),B=g("div"),R(C.$$.fragment),this.h()},l(M){e=b(M,"DIV",{class:!0});var V=$(e);t=b(V,"DIV",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-1hbx8cs"&&(t.textContent=n),r=D(V),s=b(V,"DIV",{class:!0});var W=$(s);l=b(W,"DIV",{"data-svelte-h":!0}),X(l)!=="svelte-1jp463r"&&(l.textContent=o),a=D(W),d=b(W,"DIV",{});var J=$(d);u=G(J,i[0]),J.forEach(f),h=D(W),p=b(W,"DIV",{"data-svelte-h":!0}),X(p)!=="svelte-11m6f6d"&&(p.textContent=S),w=D(W),K=b(W,"DIV",{});var pe=$(K);N=G(pe,i[1]),pe.forEach(f),W.forEach(f),E=D(V),v=b(V,"DIV",{});var te=$(v);m=b(te,"DIV",{class:!0});var ge=$(m);L(_.$$.fragment,ge),ge.forEach(f),k=D(te),B=b(te,"DIV",{class:!0});var be=$(B);L(C.$$.fragment,be),be.forEach(f),te.forEach(f),V.forEach(f),this.h()},h(){y(t,"class","title svelte-1arljx9"),y(s,"class","content svelte-1arljx9"),y(m,"class","button svelte-1arljx9"),y(B,"class","button svelte-1arljx9"),y(e,"class","popup svelte-1arljx9")},m(M,V){P(M,e,V),c(e,t),c(e,r),c(e,s),c(s,l),c(s,a),c(s,d),c(d,u),c(s,h),c(s,p),c(s,w),c(s,K),c(K,N),c(e,E),c(e,v),c(v,m),U(_,m,null),c(v,k),c(v,B),U(C,B,null),H=!0},p(M,[V]){(!H||V&1)&&ee(u,M[0]),(!H||V&2)&&ee(N,M[1]);const W={};V&16&&(W.$$scope={dirty:V,ctx:M}),_.$set(W);const J={};V&16&&(J.$$scope={dirty:V,ctx:M}),C.$set(J)},i(M){H||(T(_.$$.fragment,M),T(C.$$.fragment,M),H=!0)},o(M){I(_.$$.fragment,M),I(C.$$.fragment,M),H=!1},d(M){M&&f(e),q(_),q(C)}}}function qt(i,e,t){let{time:n}=e,{bestTime:r}=e;function s(){F.retry(new Date().getTime())}function l(){F.backToMenu()}return i.$$set=o=>{"time"in o&&t(0,n=o.time),"bestTime"in o&&t(1,r=o.bestTime)},[n,r,s,l]}class Kt extends z{constructor(e){super(),j(this,e,qt,Ut,Y,{time:0,bestTime:1})}}function Wt(i){let e,t,n=("000"+i[0]).slice(-3)+"",r;return{c(){e=g("div"),t=A("⏱"),r=A(n),this.h()},l(s){e=b(s,"DIV",{class:!0});var l=$(e);t=G(l,"⏱"),r=G(l,n),l.forEach(f),this.h()},h(){y(e,"class","time svelte-6nl12l")},m(s,l){P(s,e,l),c(e,t),c(e,r)},p(s,[l]){l&1&&n!==(n=("000"+s[0]).slice(-3)+"")&&ee(r,n)},i:x,o:x,d(s){s&&f(e)}}}function Yt(i,e,t){let{seconds:n=0}=e;return i.$$set=r=>{"seconds"in r&&t(0,n=r.seconds)},[n]}class zt extends z{constructor(e){super(),j(this,e,Yt,Wt,Y,{seconds:0})}}function Me(i){let e,t="✘",n,r;return{c(){e=g("button"),e.textContent=t,this.h()},l(s){e=b(s,"BUTTON",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1qai5py"&&(e.textContent=t),this.h()},h(){y(e,"class","discard svelte-1cy7s05")},m(s,l){P(s,e,l),n||(r=Z(e,"click",i[6]),n=!0)},d(s){s&&f(e),n=!1,r()}}}function we(i){let e,t;return e=new St({}),{c(){R(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,r){U(e,n,r),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function Oe(i){let e,t;return e=new Kt({props:{time:i[2].elapsedSeconds,bestTime:i[0].bestTime}}),{c(){R(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,r){U(e,n,r),t=!0},p(n,r){const s={};r&4&&(s.time=n[2].elapsedSeconds),r&1&&(s.bestTime=n[0].bestTime),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function jt(i){let e,t,n,r,s,l,o,a,d,u,h,p,S,w,K;r=new Ve({});let N=i[3]&&Me(i);a=new Mt({props:{count:i[2].restBombCount}}),u=new zt({props:{seconds:i[2].elapsedSeconds}}),p=new It({props:{board:i[2].board,isDisabled:!i[3]}}),p.$on("changeMark",i[4]),p.$on("openCover",i[5]);let E=i[1]&&we(),v=i[0].type==="COMPLETE"&&i[0].q==="POPUP-OPEN"&&Oe(i);return{c(){e=g("div"),t=g("div"),n=g("div"),R(r.$$.fragment),s=O(),N&&N.c(),l=O(),o=g("div"),R(a.$$.fragment),d=O(),R(u.$$.fragment),h=O(),R(p.$$.fragment),S=O(),E&&E.c(),w=O(),v&&v.c(),this.h()},l(m){e=b(m,"DIV",{class:!0});var _=$(e);t=b(_,"DIV",{});var k=$(t);n=b(k,"DIV",{class:!0});var B=$(n);L(r.$$.fragment,B),s=D(B),N&&N.l(B),B.forEach(f),l=D(k),o=b(k,"DIV",{class:!0});var C=$(o);L(a.$$.fragment,C),d=D(C),L(u.$$.fragment,C),C.forEach(f),h=D(k),L(p.$$.fragment,k),k.forEach(f),S=D(_),E&&E.l(_),w=D(_),v&&v.l(_),_.forEach(f),this.h()},h(){y(n,"class","header svelte-1cy7s05"),y(o,"class","info svelte-1cy7s05"),y(e,"class","game-page svelte-1cy7s05")},m(m,_){P(m,e,_),c(e,t),c(t,n),U(r,n,null),c(n,s),N&&N.m(n,null),c(t,l),c(t,o),U(a,o,null),c(o,d),U(u,o,null),c(t,h),U(p,t,null),c(e,S),E&&E.m(e,null),c(e,w),v&&v.m(e,null),K=!0},p(m,[_]){m[3]?N||(N=Me(m),N.c(),N.m(n,null)):N&&(N.d(1),N=null);const k={};_&4&&(k.count=m[2].restBombCount),a.$set(k);const B={};_&4&&(B.seconds=m[2].elapsedSeconds),u.$set(B);const C={};_&4&&(C.board=m[2].board),_&8&&(C.isDisabled=!m[3]),p.$set(C),m[1]?E?_&2&&T(E,1):(E=we(),E.c(),T(E,1),E.m(e,w)):E&&(re(),I(E,1,1,()=>{E=null}),se()),m[0].type==="COMPLETE"&&m[0].q==="POPUP-OPEN"?v?(v.p(m,_),_&1&&T(v,1)):(v=Oe(m),v.c(),T(v,1),v.m(e,null)):v&&(re(),I(v,1,1,()=>{v=null}),se())},i(m){K||(T(r.$$.fragment,m),T(a.$$.fragment,m),T(u.$$.fragment,m),T(p.$$.fragment,m),T(E),T(v),K=!0)},o(m){I(r.$$.fragment,m),I(a.$$.fragment,m),I(u.$$.fragment,m),I(p.$$.fragment,m),I(E),I(v),K=!1},d(m){m&&f(e),q(r),N&&N.d(),q(a),q(u),q(p),E&&E.d(),v&&v.d()}}}function Ft(i,e,t){let n,r,s,{state:l}=e;he(),je(()=>{setInterval(()=>F.tick(new Date().getTime()),100)});function o(u){F.changeMark(u.detail)}function a(u){F.openCover(u.detail)}const d=u=>F.giveUp();return i.$$set=u=>{"state"in u&&t(0,l=u.state)},i.$$.update=()=>{i.$$.dirty&1&&t(3,n=l.type==="PLAYING"),i.$$.dirty&1&&t(2,r=l.game),i.$$.dirty&1&&t(1,s=l.type==="GAME-OVER"&&l.q==="POPUP-OPEN")},[l,s,r,n,o,a,d]}class xt extends z{constructor(e){super(),j(this,e,Ft,jt,Y,{state:0})}}function Ht(i){let e,t;return e=new xt({props:{state:i[0]}}),{c(){R(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,r){U(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.state=n[0]),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function Qt(i){let e,t;return e=new vt({}),{c(){R(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,r){U(e,n,r),t=!0},p:x,i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function Xt(i){let e,t,n,r;const s=[Qt,Ht],l=[];function o(a,d){return a[0].type==="SELECT-STAGE"?0:1}return t=o(i),n=l[t]=s[t](i),{c(){e=g("div"),n.c(),this.h()},l(a){e=b(a,"DIV",{class:!0});var d=$(e);n.l(d),d.forEach(f),this.h()},h(){y(e,"class","root svelte-ryl9ph")},m(a,d){P(a,e,d),l[t].m(e,null),r=!0},p(a,[d]){let u=t;t=o(a),t===u?l[t].p(a,d):(re(),I(l[u],1,1,()=>{l[u]=null}),se(),n=l[t],n?n.p(a,d):(n=l[t]=s[t](a),n.c()),T(n,1),n.m(e,null))},i(a){r||(T(n),r=!0)},o(a){I(n),r=!1},d(a){a&&f(e),l[t].d()}}}function Jt(i,e,t){let n;return F.state.subscribe(r=>{t(0,n=r)}),[n]}class rn extends z{constructor(e){super(),j(this,e,Jt,Xt,Y,{})}}export{rn as component};
